I"ì<h3><b>What is a column store index?</b></h3>
<p>A columnstore index is a type of data structure thatâ€™s used to store, manage and retrieve data that is stored in aÂ columnar-style database.<img class="alignnone size-full wp-image-1189" src="https://techforumugm.files.wordpress.com/2020/03/csi01.png" alt="CSI01" width="1259" height="533" /></p>
<h3>Why Column Store Index is used ?</h3>
<ul>
	<li>Best for queries that scan/aggregate large sets of data.</li>
	<li>IO Statistics - dramatically reduces # of logical reads.</li>
	<li>Smart IO and caching using aggressive read-ahead read strategy.</li>
	<li>In a regular index, indexed data from each row kept together on single page â€“ and the data in each column spread across all pages of index</li>
	<li>Best for data warehouse/mart queries that scan/aggregate large amounts of dataâ€“might lower need for OLAP aggregation</li>
	<li>In a regular index, indexed data from each row kept together on single page â€“ and the data in each column spread across all pages of index</li>
	<li>More and more functionality in DB engine (xVelocity, CDC)</li>
	<li>Some queries might run at least 10x faster (or more)</li>
	<li>Reduced storage costs and enhance performance.</li>
	<li>In Data Warehouses/Data Marts (in a star schema) ,queries performance is gained</li>
	<li>Load from Data Warehouses/Marts into OLAP Cubes</li>
	<li>SSAS OLAP Databases that use the ROLAP methodology or pass-through mode â€œmightâ€ benefit (more so in SQL 2014)</li>
	<li>New Analysis Services Tabular Model uses xVelocity engine</li>
</ul>
<h3><b>How to Create a column store index?</b></h3>
<p>Expand theÂ  table. Under Indexes, right click and select New Index and then Clustered Column store Index as shown below :</p>

<p>Using SQL Server Management Studio :</p>

<p>[gallery ids=â€1195,1196â€ type=â€rectangularâ€]</p>

<p>Using T-SQL</p>
<pre>CREATE CLUSTERED COLUMNSTORE INDEX [IXProductID] ON [dbo].[Product]

WITHÂ (DROP_EXISTING = OFF, COMPRESSION_DELAY = 0, DATA_COMPRESSION = COLUMNSTORE) 
ON [PRIMARY]

GO</pre>
<p>Â </p>
<h3><b>Difference Between Column store vs. Row store index</b></h3>
<p><b>Row store :</b></p>
<ul>
	<li>Row store data is logically organized by rows and columns, and is physically stored in row-oriented data pages.</li>
	<li>Row store indexes perform best on queries that seek data by searching for a particular value or retrieving a small range of values.</li>
</ul>
<p><b>Column store :</b></p>
<ul>
	<li>The column store index is also logically organized as a table with rows and columns, but the data is physically stored in a column-wise data format.</li>
	<li>Column store indexes work well for mostly read-only queries with large data sets, like data warehousing workloads.</li>
</ul>
<p>Â </p>

<p><img class="alignnone size-full wp-image-1199" src="https://techforumugm.files.wordpress.com/2019/09/csi04.png" alt="CSI04" width="690" height="332" /></p>
<table width="640">
<tbody>
<tr>
<td width="307">Â  Â  Â  Â  Â  Â  Â  Â  Row Store Index</td>
<td width="333">Â  Â  Â  Â  Â  Â  Â  Â  Â  Column Store Index</td>
</tr>
<tr>
<td width="307">Row store indexes tend to be better for online transaction processing (OLTP) workloads, which use more update and seek operations.</td>
<td width="333">Column store indexes tend to be better for online analytical processing (OLAP) workloads, which use more read operations.</td>
</tr>
<tr>
<td width="307">Row store indexes tend to be better at performing random reads and writes.</td>
<td width="333">Column store indexes tend to be better for performing sequential reads and writes.</td>
</tr>
<tr>
<td width="307">Row store data is logically organized by rows and columns, and is physically stored in row-oriented data pages.</td>
<td width="333">The column store index is also logically organized as a table with rows and columns, but the data is physically stored in a column-wise data format.</td>
</tr>
</tbody>
</table>
<h3>Limitations of Column Store Index</h3>
<ul>
	<li>Cannot be clustered, cannot be created against a view</li>
	<li>Cannot act as a PK or FK, cannot include sparse columns</li>
	<li>Canâ€™t work on tables with Change Data Capture/Change Tracking or FileStream, canâ€™t participate in replication, nor when page/row compression exists</li>
	<li>Cannot be used with certain data types, such as binary, text/image, rowversion/timestamp, CLR data types (hierarchyID/spatial), nor with data types created with MAX keywordâ€¦e.g. varchar(max)</li>
	<li>Cannot be used with Unique Identifier</li>
	<li>Cannot be used with decimal &gt; 18</li>
	<li>Cannot be modified with ALTER â€“ must be dropped and recreated</li>
	<li>Not optimized for certain statements (OUTER JOIN, UNION, NOT IN &lt;subquery&gt;)</li>
	<li>Not optimized for certain scenarios (high selectivity, queries lacking any aggregations)</li>
	<li>Issue OUTER JOIN: canâ€™t use directly against table</li>
	<li>Will â€œworkâ€, but will use slower row execution mode</li>
	<li>Must pre-aggregate separately and then do OUTER JOIN</li>
</ul>
<p>Â </p>

<p>Â </p>

<p>Â </p>

<p>Â </p>

<p>Â </p>
:ET